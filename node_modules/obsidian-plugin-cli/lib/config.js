"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getConfig = void 0;
const cosmiconfig_1 = require("cosmiconfig");
const getConfig = async (entryPoint, configPath) => {
    var _a, _b;
    let esbuildConfig;
    const configFinder = cosmiconfig_1.cosmiconfig("esbuild");
    if (configPath) {
        const { config } = (_a = (await configFinder.load(configPath))) !== null && _a !== void 0 ? _a : {
            config: {},
        };
        esbuildConfig = config;
    }
    else {
        const { config } = (_b = (await configFinder.search())) !== null && _b !== void 0 ? _b : { config: {} };
        esbuildConfig = config;
    }
    if (entryPoint) {
        esbuildConfig.entryPoints = [entryPoint];
        return esbuildConfig;
    }
    if (!esbuildConfig.entryPoints) {
        throw new Error("Please provide the path to a file to build");
    }
    return esbuildConfig;
};
exports.getConfig = getConfig;
